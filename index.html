<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>My Universe</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Cormorant+Garamond:ital,wght@0,300;1,400&display=swap" rel="stylesheet">

<style>
    /* --- 1. GLOBAL SETTINGS --- */
    :root {
        --deep-space: #000000;
        --gold-accent: #ffd700;
        --text-bright: #ffffff;
    }

    body {
        margin: 0;
        height: 100vh;
        overflow: hidden;
        background-color: var(--deep-space);
        font-family: 'Cormorant Garamond', serif;
        color: var(--text-bright);
        display: flex;
        justify-content: center;
        align-items: center;
        user-select: none;
    }

    /* --- 2. WARP CANVAS --- */
    #warp-canvas {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        z-index: 1; mix-blend-mode: screen;
        pointer-events: none;
    }

    /* --- 3. BACKGROUND LAYERS --- */
    .deep-bg { 
        position: absolute; width: 100%; height: 100%; 
        background: radial-gradient(ellipse at center, #1B2735 0%, #090A0F 100%); 
        z-index: -10; 
    }

    /* STATIC STARS (The Twinkle Layer) */
    .galaxy-stars {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        z-index: -5;
        background-image: 
            radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px),
            radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px),
            radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 3px);
        background-size: 550px 550px, 350px 350px, 250px 250px;
        opacity: 0; 
        transition: opacity 3s ease-in-out;
    }

    /* SHOOTING STARS CONTAINER */
    .shooting-stars {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        z-index: -2; overflow: hidden; opacity: 0; pointer-events: none;
        transition: opacity 2s ease-in-out;
    }

    /* Falling Star Shape */
    .shoot-star {
        position: absolute;
        height: 2px;
        background: linear-gradient(-45deg, #fff, rgba(0, 0, 255, 0));
        filter: drop-shadow(0 0 6px #fff);
        opacity: 0;
        /* Rotate to fall diagonally (Top-Right to Bottom-Left) */
        transform: rotate(-45deg); 
        animation: tail 3s ease-in-out infinite, falling 3s ease-in-out infinite;
    }
    
    .shoot-star::before {
        content: ''; position: absolute; top: calc(50% - 1px); right: 0;
        height: 2px; background: linear-gradient(-45deg, rgba(0, 0, 255, 0), #fff, rgba(0, 0, 255, 0));
        transform: translateX(50%) rotateZ(45deg);
        border-radius: 100%;
        animation: shining 3s ease-in-out infinite;
    }
    .shoot-star::after {
        content: ''; position: absolute; top: calc(50% - 1px); right: 0;
        height: 2px; background: linear-gradient(-45deg, rgba(0, 0, 255, 0), #fff, rgba(0, 0, 255, 0));
        transform: translateX(50%) rotateZ(45deg);
        border-radius: 100%;
        animation: shining 3s ease-in-out infinite;
        transform: translateX(50%) rotateZ(-45deg);
    }

    /* --- 4. TITLE & TEXT (STABLE) --- */
    .main-title { 
        position: absolute; top: 50%; left: 50%; 
        transform: translate(-50%, -50%); 
        z-index: 10; text-align: center; width: 100%; pointer-events: none; 
        opacity: 0; 
        animation: fadeInTitle 3s ease-out forwards; animation-delay: 4.5s; 
    }
    
    .main-title h1 { 
        font-family: 'Cinzel', serif; font-size: 8vw; letter-spacing: 0.2em; margin: 0; 
        color: #ffffff; text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
        white-space: nowrap;
        animation: titleZoom 5s ease-out forwards;
    }

    /* --- 5. ICONS (STABLE) --- */
    .icon-btn {
        position: absolute; width: 80px; height: 80px;
        display: flex; justify-content: center; align-items: center;
        z-index: 20; cursor: pointer; 
        opacity: 0; /* Hidden initially */
        animation: simpleFadeIn 2s ease-out forwards; animation-delay: 5.5s;
    }

    /* Hidden by default (Treasure Hunt) */
    .emoji-content { 
        font-size: 2.5rem; 
        opacity: 0; 
        transform: scale(0.5); 
        transition: 0.3s; 
        filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3));
    }
    
    /* Visible by default (The Hint) */
    .hint-star { 
        position: absolute; width: 8px; height: 8px; 
        background: #ffd700; border-radius: 50%; 
        box-shadow: 0 0 10px #ffd700; 
        animation: hintPulse 2s infinite; 
        transition: 0.3s; 
        opacity: 1;
    }
    
    /* Hidden by default */
    .icon-label {
        position: absolute; top: 70px;
        font-family: 'Cinzel', serif; font-size: 0.8rem; letter-spacing: 2px; font-weight: 600; 
        color: #ffffff; 
        opacity: 0; 
        pointer-events: none; text-shadow: 0 2px 5px black;
        transition: 0.3s;
    }

    /* --- HOVER EFFECTS (The Reveal) --- */
    .icon-btn:hover .emoji-content { opacity: 1; transform: scale(1.4); filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.8)); }
    .icon-btn:hover .hint-star { opacity: 0; }
    .icon-btn:hover .icon-label { opacity: 1; }


    /* --- MUSIC ACTIVE STATES --- */
    /* Only activate background effects. No movement on text. */
    body.music-active .shooting-stars { opacity: 1; }
    body.music-active .galaxy-stars { opacity: 1; animation: breatheStars 4s infinite ease-in-out; }

    /* --- ANIMATION KEYFRAMES --- */
    
    /* Falling Animation (Diagonal Down-Left) */
    @keyframes falling {
        0% { transform: translateX(0) translateY(0) rotate(-45deg); opacity: 1; }
        100% { transform: translateX(-500px) translateY(500px) rotate(-45deg); opacity: 0; }
    }

    @keyframes tail { 0% { width: 0; } 30% { width: 100px; } 100% { width: 0; } }
    @keyframes shining { 0% { width: 0; } 50% { width: 30px; } 100% { width: 0; } }
    @keyframes breatheStars { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }

    @keyframes fadeInTitle { to { opacity: 1; } }
    @keyframes titleZoom { from { transform: scale(1.2); } to { transform: scale(1); } }
    @keyframes simpleFadeIn { to { opacity: 1; } }
    
    @keyframes invitePulse { 0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); transform: scale(1); } 70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); transform: scale(1.05); } 100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); transform: scale(1); } }
    @keyframes hintPulse { 0% { transform: scale(1); opacity: 0.5; } 50% { transform: scale(1.3); opacity: 1; } 100% { transform: scale(1); opacity: 0.5; } }

    /* Modal & UI */
    .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); z-index: 50; opacity: 0; pointer-events: none; transition: 0.3s; display: flex; justify-content: center; align-items: center; }
    .modal-active { opacity: 1; pointer-events: auto; }
    .glass-card { width: 85%; max-width: 380px; padding: 40px 20px; background: rgba(20, 20, 20, 0.95); border: 1px solid rgba(255, 215, 0, 0.3); border-radius: 20px; text-align: center; transform: scale(0.9); transition: 0.3s; }
    .modal-active .glass-card { transform: scale(1); }
    .glass-card h2 { font-family: 'Cinzel', serif; color: #ffd700; margin-bottom: 15px; }
    .glass-card p { color: #ffffff; line-height: 1.6; }
    .close-btn { margin-top: 25px; padding: 10px 25px; background: transparent; border: 1px solid #ffd700; color: #ffd700; border-radius: 50px; cursor: pointer; }
    
    .sound-control { position: fixed; bottom: 30px; left: 30px; z-index: 100; color: rgba(255,255,255,0.9); font-family: 'Cinzel', serif; font-size: 0.8rem; font-weight: bold; cursor: pointer; border: 1px solid rgba(255,255,255,0.6); padding: 10px 20px; border-radius: 30px; letter-spacing: 1px; transition: 0.3s; animation: invitePulse 2s infinite; }

</style>
</head>
<body>

    <div class="deep-bg"></div>
    <div class="galaxy-stars"></div>
    
    <div class="shooting-stars">
        <div class="shoot-star" style="top: -10%; left: 50%; animation-delay: 0s;"></div>
        <div class="shoot-star" style="top: 10%; left: 80%; animation-delay: 2s;"></div>
        <div class="shoot-star" style="top: -20%; left: 30%; animation-delay: 4s;"></div>
        <div class="shoot-star" style="top: 0%; left: 90%; animation-delay: 1s;"></div>
        <div class="shoot-star" style="top: 20%; left: 70%; animation-delay: 3s;"></div>
    </div>

    <canvas id="warp-canvas"></canvas>

    <div class="main-title"><h1>MY UNIVERSE</h1></div>

    <div class="icon-btn" style="top: 25%; left: 15%;" onclick="showMemory('Origin', 'Like a star born in the void, meeting you began my universe.')">
        <div class="hint-star"></div>
        <span class="emoji-content">üíå</span>
        <span class="icon-label">ORIGIN</span>
    </div>

    <div class="icon-btn" style="top: 65%; left: 25%;" onclick="showMemory('Our Journey', 'Every moment together is an adventure I never want to end.')">
        <div class="hint-star"></div>
        <span class="emoji-content">üèéÔ∏è</span>
        <span class="icon-label">JOURNEY</span>
    </div>

    <div class="icon-btn" style="top: 30%; right: 20%;" onclick="showMemory('My Promise', 'As long as stars shine, I will be by your side.')">
        <div class="hint-star"></div>
        <span class="emoji-content">üíç</span>
        <span class="icon-label">ETERNITY</span>
    </div>

    <div class="icon-btn" style="bottom: 25%; right: 15%;" onclick="showMemory('My Valentine', 'You are the center of my galaxy. Happy Valentine‚Äôs Day.')">
        <div class="hint-star"></div>
        <span class="emoji-content">‚ù§Ô∏è</span>
        <span class="icon-label">HEART</span>
    </div>

    <div class="modal-overlay" id="modal" onclick="closeModal(event)">
        <div class="glass-card">
            <h2 id="m-title">Title</h2>
            <p id="m-text">Message...</p>
            <button class="close-btn" onclick="closeModalDirect()">Close</button>
        </div>
    </div>

    <div class="sound-control" onclick="toggleAudio()">CLICK FOR MUSIC</div>
    <audio id="bg-music" loop><source src="song.mp3" type="audio/mp3"></audio>

<script>
    /* --- WARP ENGINE --- */
    const canvas = document.getElementById('warp-canvas');
    const ctx = canvas.getContext('2d');
    let width, height, stars = [];
    let speed = 25; 
    let isSlowingDown = false;
    let musicMode = false;

    function resize() { width = window.innerWidth; height = window.innerHeight; canvas.width = width; canvas.height = height; initStars(); }
    
    class Star {
        constructor() { this.x = (Math.random()-0.5)*width; this.y = (Math.random()-0.5)*height; this.z = Math.random()*width; this.pz = this.z; }
        update() {
            this.z -= speed;
            if (this.z < 1) { this.z = width; this.x = (Math.random()-0.5)*width; this.y = (Math.random()-0.5)*height; this.pz = this.z; }
        }
        draw() {
            let sx = (this.x/this.z)*width + width/2; let sy = (this.y/this.z)*height + height/2;
            let px = (this.x/this.pz)*width + width/2; let py = (this.y/this.pz)*height + height/2;
            this.pz = this.z;
            ctx.beginPath();
            let alpha = musicMode ? 0.1 : 1; 
            ctx.strokeStyle = `rgba(255,255,255,${alpha})`;
            let lw = (1 - this.z/width) * (speed > 10 ? 3 : 1);
            ctx.lineWidth = lw;
            ctx.moveTo(px, py); ctx.lineTo(sx, sy); ctx.stroke();
        }
    }
    
    function initStars() { stars = []; for(let i=0; i<400; i++) stars.push(new Star()); }
    
    function animate() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.4)"; ctx.fillRect(0, 0, width, height);
        for(let s of stars) { s.update(); s.draw(); }
        if(isSlowingDown && !musicMode && speed > 0.2) speed *= 0.96;
        if(musicMode) speed = 0.5; 
        requestAnimationFrame(animate);
    }

    window.onload = function() { resize(); animate(); setTimeout(() => { isSlowingDown = true; }, 3500); };
    window.addEventListener('resize', resize);

    /* --- AUDIO & EFFECTS --- */
    const audio = document.getElementById('bg-music');
    const btn = document.querySelector('.sound-control');
    let isPlaying = false;

    function toggleAudio() {
        if(!isPlaying) {
            audio.volume = 0.5;
            audio.play().then(() => {
                btn.style.animation = "none";
                btn.innerText = "SOUND ON";
                btn.style.color = "#ffd700"; btn.style.borderColor = "#ffd700";
                document.body.classList.add('music-active');
                musicMode = true; 
            }).catch(e => console.log("Audio failed:", e));
        } else {
            audio.pause();
            btn.innerText = "SOUND OFF";
            btn.style.color = "rgba(255,255,255,0.6)"; btn.style.borderColor = "rgba(255,255,255,0.3)";
            document.body.classList.remove('music-active');
            musicMode = false;
        }
        isPlaying = !isPlaying;
    }

    /* --- MODAL --- */
    const modal = document.getElementById('modal');
    const mTitle = document.getElementById('m-title');
    const mText = document.getElementById('m-text');
    function showMemory(title, text) { mTitle.innerText = title; mText.innerText = text; modal.classList.add('modal-active'); }
    function closeModal(e) { if(e.target === modal) modal.classList.remove('modal-active'); }
    function closeModalDirect() { modal.classList.remove('modal-active'); }
</script>
</body>
</html>