<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Universe</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">

    <style>
        :root { --gold: #ffd700; --white: #ffffff; --bg: #000000; }

        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            background-color: var(--bg); font-family: 'Cormorant Garamond', serif;
            color: var(--white); display: flex; justify-content: center; align-items: center;
            user-select: none; -webkit-tap-highlight-color: transparent;
        }

        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        #warp-canvas { z-index: 2; mix-blend-mode: screen; transition: opacity 2s; }
        #universe-canvas { z-index: 0; opacity: 0; transition: opacity 3s; }

        .bg-gradient { 
            position: absolute; width: 100%; height: 100%; 
            background: radial-gradient(ellipse at center, #0B0B0B 0%, #000000 100%); 
            z-index: -10; 
        }

        .title-wrapper {
            position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%);
            z-index: 100; text-align: center; width: 90%; opacity: 0; 
            animation: fade-in 3s forwards 2.5s;
        }

        #dynamic-text { 
            font-family: 'Cormorant Garamond', serif; font-weight: 600; font-style: italic;
            font-size: clamp(1.8rem, 7vw, 4rem); letter-spacing: 0.02em; margin: 0; 
            color: #ffffff; text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            transition: opacity 1.5s, transform 0.3s; cursor: pointer; display: inline-block;
        }

        .click-hint {
            display: block; font-family: 'Cinzel', serif; font-size: 0.7rem;
            letter-spacing: 3px; color: rgba(255,255,255,0.4);
            margin-top: 15px; animation: pulse-hint 2s infinite;
        }

        #explore-hint {
            position: fixed; bottom: 15%; width: 100%; text-align: center;
            font-family: 'Cinzel', serif; font-size: 0.65rem; letter-spacing: 4px;
            color: rgba(255, 215, 0, 0.6); opacity: 0; z-index: 90; pointer-events: none;
        }

        .memory-btn {
            position: absolute; width: 50px; height: 50px; display: flex; 
            justify-content: center; align-items: center; z-index: 20; 
            cursor: pointer; opacity: 0; transition: opacity 3s; touch-action: manipulation;
        }

        body.active .memory-btn { opacity: 1; }
        .emoji { font-size: 1.8rem; opacity: 0; transform: scale(0.5); transition: 0.5s; }

        .hint-dot { 
            position: absolute; width: 3px; height: 3px; background: #fff; 
            border-radius: 50%; box-shadow: 0 0 5px #fff; 
            animation: twinkle-stealth 3s infinite ease-in-out;
        }

        .label { 
            position: absolute; top: 50px; font-family: 'Cinzel', serif; 
            font-size: 0.6rem; color: var(--gold); opacity: 0; transition: 0.5s; 
        }

        .memory-btn:hover .emoji, .memory-btn.touch-active .emoji { opacity: 1; transform: scale(1.2); }
        .memory-btn:hover .hint-dot, .memory-btn.touch-active .hint-dot { opacity: 0; }
        .memory-btn:hover .label, .memory-btn.touch-active .label { opacity: 1; transform: translateY(5px); }

        body.active #warp-canvas { opacity: 0; }
        body.active #universe-canvas { opacity: 1; }
        body.active .click-hint { opacity: 0 !important; visibility: hidden; }

        .modal-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); z-index: 200; opacity: 0; pointer-events: none; transition: 0.4s; display: flex; justify-content: center; align-items: center; }
        .modal-bg.show { opacity: 1; pointer-events: auto; }
        .card { width: 85%; max-width: 400px; padding: 40px 25px; background: rgba(15, 15, 15, 0.98); border: 1px solid rgba(255, 215, 0, 0.2); border-radius: 30px; text-align: center; }
        .card h2 { font-family: 'Cinzel', serif; color: var(--gold); margin-bottom: 20px; }
        .btn-close { margin-top: 25px; padding: 10px 30px; background: transparent; border: 1px solid var(--gold); color: var(--gold); border-radius: 50px; cursor: pointer; font-family: 'Cinzel', serif; }

        @keyframes fade-in { to { opacity: 1; } }
        @keyframes pulse-hint { 0%, 100% { opacity: 0.2; } 50% { opacity: 0.6; } }
        @keyframes twinkle-stealth { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }
        .text-fade-out { opacity: 0 !important; }
        .pulse-text { animation: fade-in 4s infinite alternate; }
    </style>
</head>
<body>

    <div class="bg-gradient"></div>
    <canvas id="warp-canvas"></canvas>
    <canvas id="universe-canvas"></canvas>

    <div class="title-wrapper">
        <h1 id="dynamic-text" onclick="toggleAudio()">My universe</h1>
        <small class="click-hint">click on the text</small>
    </div>

    <div id="explore-hint">The stars hold our memories... search for them.</div>

    <audio id="bg-music"><source src="song.mp3" type="audio/mp3"></audio>

    <div class="memory-btn" style="top: 20%; left: 15%;" onclick="handleTap(this, 'The Beginning', 'It all began when we started talking about your name, Babe. That simple conversation became the start of my everything.')">
        <div class="hint-dot"></div><span class="emoji">üíå</span><span class="label">ORIGIN</span>
    </div>
    <div class="memory-btn" style="top: 70%; left: 20%;" onclick="handleTap(this, 'Our Journey', 'This road is ours, Babe. I want to travel by your side through every turn, until the very end of my days.')">
        <div class="hint-dot"></div><span class="emoji">üèéÔ∏è</span><span class="label">JOURNEY</span>
    </div>
    <div class="memory-btn" style="top: 30%; right: 15%;" onclick="handleTap(this, 'My Proposal', 'In this vast universe, you are my only certainty, Babe. Will you hold my hand and walk this life with me forever?')">
        <div class="hint-dot"></div><span class="emoji">üíç</span><span class="label">PROMISE</span>
    </div>
    <div class="memory-btn" style="bottom: 25%; right: 20%;" onclick="handleTap(this, 'My Heart', 'My heart belongs to you completely. I will love you for all eternity. Happy Valentine\'s Day, Babe.')">
        <div class="hint-dot"></div><span class="emoji">‚ù§Ô∏è</span><span class="label">HEART</span>
    </div>
    <div class="memory-btn" style="top: 50%; left: 8%;" onclick="handleTap(this, 'For You', 'Like a rose needs rain, I need you, Babe. You are the beauty in my world, blooming eternally in my heart.')">
        <div class="hint-dot"></div><span class="emoji">üåπ</span><span class="label">ROSE</span>
    </div>
    <div class="memory-btn" style="top: 50%; right: 8%;" onclick="handleTap(this, 'Sweetness', 'I bought everything I thought you would love, Babe, hoping to see a smile as sweet as you are.')">
        <div class="hint-dot"></div><span class="emoji">üç´</span><span class="label">SWEET</span>
    </div>

    <div class="modal-bg" id="modal" onclick="closeModal(event)">
        <div class="card">
            <h2 id="m-title">Title</h2>
            <p id="m-text">Message...</p>
            <button class="btn-close" onclick="closeDirect()">Close</button>
        </div>
    </div>

    <script>
        const warpC = document.getElementById('warp-canvas'), warpCtx = warpC.getContext('2d');
        const univC = document.getElementById('universe-canvas'), univCtx = univC.getContext('2d');
        const textElement = document.getElementById('dynamic-text');
        const bgAudio = document.getElementById('bg-music');
        const exploreHint = document.getElementById('explore-hint');
        
        let w, h, warpStars = [], sparkles = [];
        let warpSpeed = 25, isMusicPlaying = false, slowingDown = false;
        let phraseIndex = 0, textTimer;

        const phrases = [
            "My universe", "It's you, Babe", "You are my little universe", 
            "Miles apart, but never at heart", "You are worth every mile between us",
            "Even after our fights, we always have each other", "Thanks for staying for me",
            "Thanks for choosing me", "My heart beats only for you",
            "Forever and Always", "Happy Valentine's, my love"
        ];

        function resize() {
            w = window.innerWidth; h = window.innerHeight;
            warpC.width = univC.width = w; warpC.height = univC.height = h;
            initWarp(); initSparkles();
        }

        class WarpStar {
            constructor() { this.x = (Math.random()-0.5)*w; this.y = (Math.random()-0.5)*h; this.z = Math.random()*w; }
            update() { this.z -= warpSpeed; if(this.z < 1) this.z = w; }
            draw() {
                let sx = (this.x/this.z)*w + w/2, sy = (this.y/this.z)*h + h/2;
                let size = (1 - this.z/w) * (warpSpeed > 10 ? 2 : 1);
                warpCtx.fillStyle = "rgba(255,255,255,0.7)";
                warpCtx.beginPath(); warpCtx.arc(sx, sy, size, 0, Math.PI*2); warpCtx.fill();
            }
        }

        class Sparkle {
            constructor() { this.x = Math.random()*w; this.y = Math.random()*h; this.size = Math.random()*1.5; this.speed = 0.01 + Math.random()*0.02; }
            draw() {
                let a = 0.1 + Math.abs(Math.sin(Date.now()*this.speed)*0.6);
                univCtx.fillStyle = `rgba(255,255,255,${a})`;
                univCtx.beginPath(); univCtx.arc(this.x, this.y, this.size, 0, Math.PI*2); univCtx.fill();
            }
        }

        function initWarp() { warpStars = []; for(let i=0; i<250; i++) warpStars.push(new WarpStar()); }
        function initSparkles() { sparkles = []; for(let i=0; i<600; i++) sparkles.push(new Sparkle()); }

        function drawSigns() {
            univCtx.strokeStyle = "rgba(255, 215, 0, 0.4)"; univCtx.lineWidth = 1.2;
            const draw = (pts, ox, oy) => {
                univCtx.beginPath(); pts.forEach((p,i) => i==0 ? univCtx.moveTo(ox+p.x, oy+p.y) : univCtx.lineTo(ox+p.x, oy+p.y)); univCtx.stroke();
                pts.forEach(p => { univCtx.fillStyle = "#fff"; univCtx.beginPath(); univCtx.arc(ox+p.x, oy+p.y, 2, 0, Math.PI*2); univCtx.fill(); });
            };
            draw([{x:0,y:0},{x:30,y:-10},{x:60,y:0},{x:80,y:20}], w*0.8, h*0.2); 
            draw([{x:0,y:0},{x:20,y:20},{x:40,y:50},{x:30,y:80},{x:0,y:100}], w*0.1, h*0.7); 
        }

        function loop() {
            warpCtx.clearRect(0,0,w,h); if(warpSpeed > 0.1) warpStars.forEach(s => { s.update(); s.draw(); });
            univCtx.clearRect(0,0,w,h);
            if(isMusicPlaying) { sparkles.forEach(s => s.draw()); drawSigns(); }
            if(!isMusicPlaying && slowingDown) warpSpeed *= 0.96;
            requestAnimationFrame(loop);
        }

        function toggleAudio() {
            if(isMusicPlaying) return;
            bgAudio.volume = 0.5;
            bgAudio.play().then(() => {
                document.body.classList.add('active'); isMusicPlaying = true; warpSpeed = 0;
                cycleText();
                setTimeout(() => { if(isMusicPlaying) { exploreHint.classList.add('pulse-text'); exploreHint.style.opacity = "1"; } }, 8000);
                setTimeout(() => location.reload(), 171000); 
            });
        }

        function cycleText() {
            if(!isMusicPlaying) return;
            textTimer = setTimeout(() => {
                textElement.classList.add('text-fade-out');
                setTimeout(() => {
                    phraseIndex = (phraseIndex + 1) % phrases.length;
                    textElement.innerHTML = phrases[phraseIndex];
                    textElement.classList.remove('text-fade-out');
                    cycleText();
                }, 1500);
            }, 4000);
        }

        function handleTap(el, title, text) {
            el.classList.add('touch-active'); exploreHint.style.display = "none"; 
            document.getElementById('m-title').innerText = title;
            document.getElementById('m-text').innerHTML = text;
            document.getElementById('modal').classList.add('show');
            setTimeout(() => el.classList.remove('touch-active'), 500);
        }

        function closeModal(e) { if(e.target.id === 'modal') closeDirect(); }
        function closeDirect() { document.getElementById('modal').classList.remove('show'); }

        window.onload = () => { resize(); loop(); setTimeout(() => slowingDown = true, 3500); };
        window.addEventListener('resize', resize);
    </script>
</body>
</html>